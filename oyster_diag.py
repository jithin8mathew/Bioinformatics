import obd

connection = obd.OBD() # auto-connects to USB or RF port

# ELM_version = obd.commands.ELM_VERSION
# ELM_voltage = obd.commands.ELM_VOLTAGE

###############################################
# print('loading commands...')
# command_list = open('command_list.txt','r+').read().split(',')
# print(command_list)
#command_list = dir(obd.commands)
#command_list = ['obd.commands.'+x for x in command_list]

#exit()

def realtime_data(cmnd):
	try:
		data = connection.query(cmnd)
	except Exception:
		print(cmnd) 
	return data

command_list = [obd.commands.ABSOLUTE_LOAD, obd.commands.ACCELERATOR_POS_D, obd.commands.ACCELERATOR_POS_E, obd.commands.ACCELERATOR_POS_F, obd.commands.AIR_STATUS, obd.commands.AMBIANT_AIR_TEMP, obd.commands.AUX_INPUT_STATUS, obd.commands.BAROMETRIC_PRESSURE, obd.commands.CATALYST_TEMP_B1S1, obd.commands.CATALYST_TEMP_B1S2, obd.commands.CATALYST_TEMP_B2S1, obd.commands.CATALYST_TEMP_B2S2, obd.commands.CLEAR_DTC, obd.commands.COMMANDED_EGR, obd.commands.COMMANDED_EQUIV_RATIO, obd.commands.CONTROL_MODULE_VOLTAGE, obd.commands.COOLANT_TEMP, obd.commands.DISTANCE_SINCE_DTC_CLEAR, obd.commands.DISTANCE_W_MIL, obd.commands.DTC_ABSOLUTE_LOAD, obd.commands.DTC_ACCELERATOR_POS_D, obd.commands.DTC_ACCELERATOR_POS_E, obd.commands.DTC_ACCELERATOR_POS_F, obd.commands.DTC_AIR_STATUS, obd.commands.DTC_AMBIANT_AIR_TEMP, obd.commands.DTC_AUX_INPUT_STATUS, obd.commands.DTC_BAROMETRIC_PRESSURE, obd.commands.DTC_CATALYST_TEMP_B1S1, obd.commands.DTC_CATALYST_TEMP_B1S2, obd.commands.DTC_CATALYST_TEMP_B2S1, obd.commands.DTC_CATALYST_TEMP_B2S2, obd.commands.DTC_COMMANDED_EGR, obd.commands.DTC_COMMANDED_EQUIV_RATIO, obd.commands.DTC_CONTROL_MODULE_VOLTAGE, obd.commands.DTC_COOLANT_TEMP, obd.commands.DTC_DISTANCE_SINCE_DTC_CLEAR, obd.commands.DTC_DISTANCE_W_MIL, obd.commands.DTC_EGR_ERROR, obd.commands.DTC_EMISSION_REQ, obd.commands.DTC_ENGINE_LOAD, obd.commands.DTC_ETHANOL_PERCENT, obd.commands.DTC_EVAPORATIVE_PURGE, obd.commands.DTC_EVAP_VAPOR_PRESSURE, obd.commands.DTC_EVAP_VAPOR_PRESSURE_ABS, obd.commands.DTC_EVAP_VAPOR_PRESSURE_ALT, obd.commands.DTC_FREEZE_DTC, obd.commands.DTC_FUEL_INJECT_TIMING, obd.commands.DTC_FUEL_LEVEL, obd.commands.DTC_FUEL_PRESSURE, obd.commands.DTC_FUEL_RAIL_PRESSURE_ABS, obd.commands.DTC_FUEL_RAIL_PRESSURE_DIRECT, obd.commands.DTC_FUEL_RAIL_PRESSURE_VAC, obd.commands.DTC_FUEL_RATE, obd.commands.DTC_FUEL_STATUS, obd.commands.DTC_FUEL_TYPE, obd.commands.DTC_HYBRID_BATTERY_REMAINING, obd.commands.DTC_INTAKE_PRESSURE, obd.commands.DTC_INTAKE_TEMP, obd.commands.DTC_LONG_FUEL_TRIM_1, obd.commands.DTC_LONG_FUEL_TRIM_2, obd.commands.DTC_LONG_O2_TRIM_B1, obd.commands.DTC_LONG_O2_TRIM_B2, obd.commands.DTC_MAF, obd.commands.DTC_MAX_MAF, obd.commands.DTC_MAX_VALUES, obd.commands.DTC_O2_B1S1, obd.commands.DTC_O2_B1S2, obd.commands.DTC_O2_B1S3, obd.commands.DTC_O2_B1S4, obd.commands.DTC_O2_B2S1, obd.commands.DTC_O2_B2S2, obd.commands.DTC_O2_B2S3, obd.commands.DTC_O2_B2S4, obd.commands.DTC_O2_S1_WR_CURRENT, obd.commands.DTC_O2_S1_WR_VOLTAGE, obd.commands.DTC_O2_S2_WR_CURRENT, obd.commands.DTC_O2_S2_WR_VOLTAGE, obd.commands.DTC_O2_S3_WR_CURRENT, obd.commands.DTC_O2_S3_WR_VOLTAGE, obd.commands.DTC_O2_S4_WR_CURRENT, obd.commands.DTC_O2_S4_WR_VOLTAGE, obd.commands.DTC_O2_S5_WR_CURRENT, obd.commands.DTC_O2_S5_WR_VOLTAGE, obd.commands.DTC_O2_S6_WR_CURRENT, obd.commands.DTC_O2_S6_WR_VOLTAGE, obd.commands.DTC_O2_S7_WR_CURRENT, obd.commands.DTC_O2_S7_WR_VOLTAGE, obd.commands.DTC_O2_S8_WR_CURRENT, obd.commands.DTC_O2_S8_WR_VOLTAGE, obd.commands.DTC_O2_SENSORS, obd.commands.DTC_O2_SENSORS_ALT, obd.commands.DTC_OBD_COMPLIANCE, obd.commands.DTC_OIL_TEMP, obd.commands.DTC_PIDS_A, obd.commands.DTC_PIDS_B, obd.commands.DTC_PIDS_C, obd.commands.DTC_RELATIVE_ACCEL_POS, obd.commands.DTC_RELATIVE_THROTTLE_POS, obd.commands.DTC_RPM, obd.commands.DTC_RUN_TIME, obd.commands.DTC_RUN_TIME_MIL, obd.commands.DTC_SHORT_FUEL_TRIM_1, obd.commands.DTC_SHORT_FUEL_TRIM_2, obd.commands.DTC_SHORT_O2_TRIM_B1, obd.commands.DTC_SHORT_O2_TRIM_B2, obd.commands.DTC_SPEED, obd.commands.DTC_STATUS, obd.commands.DTC_STATUS_DRIVE_CYCLE, obd.commands.DTC_THROTTLE_ACTUATOR, obd.commands.DTC_THROTTLE_POS, obd.commands.DTC_THROTTLE_POS_B, obd.commands.DTC_THROTTLE_POS_C, obd.commands.DTC_TIME_SINCE_DTC_CLEARED, obd.commands.DTC_TIMING_ADVANCE, obd.commands.DTC_WARMUPS_SINCE_DTC_CLEAR, obd.commands.EGR_ERROR, obd.commands.ELM_VERSION, obd.commands.ELM_VOLTAGE, obd.commands.EMISSION_REQ, obd.commands.ENGINE_LOAD, obd.commands.ETHANOL_PERCENT, obd.commands.EVAPORATIVE_PURGE, obd.commands.EVAP_VAPOR_PRESSURE, obd.commands.EVAP_VAPOR_PRESSURE_ABS, obd.commands.EVAP_VAPOR_PRESSURE_ALT, obd.commands.FREEZE_DTC, obd.commands.FUEL_INJECT_TIMING, obd.commands.FUEL_LEVEL, obd.commands.FUEL_PRESSURE, obd.commands.FUEL_RAIL_PRESSURE_ABS, obd.commands.FUEL_RAIL_PRESSURE_DIRECT, obd.commands.FUEL_RAIL_PRESSURE_VAC, obd.commands.FUEL_RATE, obd.commands.FUEL_STATUS, obd.commands.FUEL_TYPE, obd.commands.GET_CURRENT_DTC, obd.commands.GET_DTC, obd.commands.HYBRID_BATTERY_REMAINING, obd.commands.INTAKE_PRESSURE, obd.commands.INTAKE_TEMP, obd.commands.LONG_FUEL_TRIM_1, obd.commands.LONG_FUEL_TRIM_2, obd.commands.LONG_O2_TRIM_B1, obd.commands.LONG_O2_TRIM_B2, obd.commands.MAF, obd.commands.MAX_MAF, obd.commands.MAX_VALUES, obd.commands.MIDS_A, obd.commands.MIDS_B, obd.commands.MIDS_C, obd.commands.MIDS_D, obd.commands.MIDS_E, obd.commands.MIDS_F, obd.commands.MONITOR_BOOST_PRESSURE_B1, obd.commands.MONITOR_BOOST_PRESSURE_B2, obd.commands.MONITOR_CATALYST_B1, obd.commands.MONITOR_CATALYST_B2, obd.commands.MONITOR_CATALYST_B3, obd.commands.MONITOR_CATALYST_B4, obd.commands.MONITOR_EGR_B1, obd.commands.MONITOR_EGR_B2, obd.commands.MONITOR_EGR_B3, obd.commands.MONITOR_EGR_B4, obd.commands.MONITOR_EVAP_020, obd.commands.MONITOR_EVAP_040, obd.commands.MONITOR_EVAP_090, obd.commands.MONITOR_EVAP_150, obd.commands.MONITOR_FUEL_SYSTEM_B1, obd.commands.MONITOR_FUEL_SYSTEM_B2, obd.commands.MONITOR_FUEL_SYSTEM_B3, obd.commands.MONITOR_FUEL_SYSTEM_B4, obd.commands.MONITOR_HEATED_CATALYST_B1, obd.commands.MONITOR_HEATED_CATALYST_B2, obd.commands.MONITOR_HEATED_CATALYST_B3, obd.commands.MONITOR_HEATED_CATALYST_B4, obd.commands.MONITOR_MISFIRE_CYLINDER_1, obd.commands.MONITOR_MISFIRE_CYLINDER_10, obd.commands.MONITOR_MISFIRE_CYLINDER_11, obd.commands.MONITOR_MISFIRE_CYLINDER_12, obd.commands.MONITOR_MISFIRE_CYLINDER_2, obd.commands.MONITOR_MISFIRE_CYLINDER_3, obd.commands.MONITOR_MISFIRE_CYLINDER_4, obd.commands.MONITOR_MISFIRE_CYLINDER_5, obd.commands.MONITOR_MISFIRE_CYLINDER_6, obd.commands.MONITOR_MISFIRE_CYLINDER_7, obd.commands.MONITOR_MISFIRE_CYLINDER_8, obd.commands.MONITOR_MISFIRE_CYLINDER_9, obd.commands.MONITOR_MISFIRE_GENERAL, obd.commands.MONITOR_NOX_ABSORBER_B1, obd.commands.MONITOR_NOX_ABSORBER_B2, obd.commands.MONITOR_NOX_CATALYST_B1, obd.commands.MONITOR_NOX_CATALYST_B2, obd.commands.MONITOR_O2_B1S1, obd.commands.MONITOR_O2_B1S2, obd.commands.MONITOR_O2_B1S3, obd.commands.MONITOR_O2_B1S4, obd.commands.MONITOR_O2_B2S1, obd.commands.MONITOR_O2_B2S2, obd.commands.MONITOR_O2_B2S3, obd.commands.MONITOR_O2_B2S4, obd.commands.MONITOR_O2_B3S1, obd.commands.MONITOR_O2_B3S2, obd.commands.MONITOR_O2_B3S3, obd.commands.MONITOR_O2_B3S4, obd.commands.MONITOR_O2_B4S1, obd.commands.MONITOR_O2_B4S2, obd.commands.MONITOR_O2_B4S3, obd.commands.MONITOR_O2_B4S4, obd.commands.MONITOR_O2_HEATER_B1S1, obd.commands.MONITOR_O2_HEATER_B1S2, obd.commands.MONITOR_O2_HEATER_B1S3, obd.commands.MONITOR_O2_HEATER_B1S4, obd.commands.MONITOR_O2_HEATER_B2S1, obd.commands.MONITOR_O2_HEATER_B2S2, obd.commands.MONITOR_O2_HEATER_B2S3, obd.commands.MONITOR_O2_HEATER_B2S4, obd.commands.MONITOR_O2_HEATER_B3S1, obd.commands.MONITOR_O2_HEATER_B3S2, obd.commands.MONITOR_O2_HEATER_B3S3, obd.commands.MONITOR_O2_HEATER_B3S4, obd.commands.MONITOR_O2_HEATER_B4S1, obd.commands.MONITOR_O2_HEATER_B4S2, obd.commands.MONITOR_O2_HEATER_B4S3, obd.commands.MONITOR_O2_HEATER_B4S4, obd.commands.MONITOR_PM_FILTER_B1, obd.commands.MONITOR_PM_FILTER_B2, obd.commands.MONITOR_PURGE_FLOW, obd.commands.MONITOR_SECONDARY_AIR_1, obd.commands.MONITOR_SECONDARY_AIR_2, obd.commands.MONITOR_SECONDARY_AIR_3, obd.commands.MONITOR_SECONDARY_AIR_4, obd.commands.MONITOR_VVT_B1, obd.commands.MONITOR_VVT_B2, obd.commands.MONITOR_VVT_B3, obd.commands.MONITOR_VVT_B4, obd.commands.O2_B1S1, obd.commands.O2_B1S2, obd.commands.O2_B1S3, obd.commands.O2_B1S4, obd.commands.O2_B2S1, obd.commands.O2_B2S2, obd.commands.O2_B2S3, obd.commands.O2_B2S4, obd.commands.O2_S1_WR_CURRENT, obd.commands.O2_S1_WR_VOLTAGE, obd.commands.O2_S2_WR_CURRENT, obd.commands.O2_S2_WR_VOLTAGE, obd.commands.O2_S3_WR_CURRENT, obd.commands.O2_S3_WR_VOLTAGE, obd.commands.O2_S4_WR_CURRENT, obd.commands.O2_S4_WR_VOLTAGE, obd.commands.O2_S5_WR_CURRENT, obd.commands.O2_S5_WR_VOLTAGE, obd.commands.O2_S6_WR_CURRENT, obd.commands.O2_S6_WR_VOLTAGE, obd.commands.O2_S7_WR_CURRENT, obd.commands.O2_S7_WR_VOLTAGE, obd.commands.O2_S8_WR_CURRENT, obd.commands.O2_S8_WR_VOLTAGE, obd.commands.O2_SENSORS, obd.commands.O2_SENSORS_ALT, obd.commands.OBD_COMPLIANCE, obd.commands.OIL_TEMP, obd.commands.PIDS_A, obd.commands.PIDS_B, obd.commands.PIDS_C, obd.commands.RELATIVE_ACCEL_POS, obd.commands.RELATIVE_THROTTLE_POS, obd.commands.RPM, obd.commands.RUN_TIME, obd.commands.RUN_TIME_MIL, obd.commands.SHORT_FUEL_TRIM_1, obd.commands.SHORT_FUEL_TRIM_2, obd.commands.SHORT_O2_TRIM_B1, obd.commands.SHORT_O2_TRIM_B2, obd.commands.SPEED, obd.commands.STATUS, obd.commands.STATUS_DRIVE_CYCLE, obd.commands.THROTTLE_ACTUATOR, obd.commands.THROTTLE_POS, obd.commands.THROTTLE_POS_B, obd.commands.THROTTLE_POS_C, obd.commands.TIME_SINCE_DTC_CLEARED, obd.commands.TIMING_ADVANCE, obd.commands.WARMUPS_SINCE_DTC_CLEAR]

responses  = [realtime_data(request) for request in command_list]

for x in responses:
	print(x.value)

cmd = obd.commands.SPEED # select an OBD command (sensor)
response = connection.query(cmd) # send the command, and parse the response


print(response.value) # returns unit-bearing values thanks to Pint
print(response.value.to("mph"))

